!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Compress=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();return function(){function o(){e(this,o),this.opts={width:300,type:"image/jpeg",quality:.92,success:function(){},error:function(t){alert(t)}}}return n(o,[{key:"image",value:function(e,n){if("object"!==(void 0===e?"undefined":t(e))||"string"!=typeof e.name)return this.opts.error("请传入fileList对象"),!1;var o=this.getFileExt(e.name);if("jpg"!==o&&"jpeg"!==o&&"png"!==o)return this.opts.error("只支持 jpg, png"),!1;this.opts=Object.assign(this.opts,n),this.base64(this.getObjectURL(e),this.opts.success)}},{key:"base64",value:function(t,e){var n=this,o=new Image;o.src=t,o.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d"),r=n.opts.width,s=r*o.height/o.width;i.fillStyle="none",t.width=r,t.height=s,i.drawImage(o,0,0,r,s),e(t.toDataURL(n.opts.type,n.opts.quality))}}},{key:"getObjectURL",value:function(t){var e=null;return window.URL?e=window.URL.createObjectURL(t):window.webkitURL?e=window.webkitURL.createObjectURL(t):(t.select(),t.blur(),e=document.selection.createRange().text),e}},{key:"getFileExt",value:function(t){return t.substr(t.lastIndexOf(".")+1).toLowerCase()}}]),o}()});
//# sourceMappingURL=index.js.map
